{"version":3,"file":"main-d58abe2f.js","sources":["../../src/main.ts"],"sourcesContent":["/// <reference types=\"@workadventure/iframe-api-typings\" />\r\n\r\nconsole.log('Script started successfully');\r\n\r\n// Globale Deklaration der noteWebsite-Variable\r\nlet noteWebsite: any = undefined;\r\n\r\n// Waiting for the API to be ready\r\nWA.onInit().then(() => {\r\n    console.log('Scripting API ready');\r\n\r\n    WA.room.onEnterLayer(\"visibleNote\").subscribe(async () => {\r\n        console.log(\"Entering visibleNote layer\");\r\n\r\n        // Überprüfen, ob noteWebsite bereits geöffnet ist und es schließen\r\n        if (noteWebsite) {\r\n            try {\r\n                await noteWebsite.close();  // Stelle sicher, dass `close()` eine asynchrone Methode ist\r\n                console.log(\"Previous noteWebsite instance closed\");\r\n            } catch (error) {\r\n                console.error(\"Error closing previous noteWebsite instance:\", error);\r\n            }\r\n            noteWebsite = undefined;\r\n        }\r\n\r\n        try {\r\n            noteWebsite = await WA.ui.website.open({\r\n                url: \"./note.html\",\r\n                position: {\r\n                    vertical: \"top\",\r\n                    horizontal: \"middle\",\r\n                },\r\n                size: {\r\n                    height: \"30vh\",\r\n                    width: \"50vw\",\r\n                },\r\n                margin: {\r\n                    top: \"10vh\",\r\n                },\r\n                allowApi: true,\r\n            });\r\n            console.log(\"noteWebsite opened successfully\");\r\n        } catch (error) {\r\n            console.error(\"Error opening noteWebsite:\", error);\r\n        }\r\n    });\r\n\r\n    WA.room.onLeaveLayer(\"visibleNote\").subscribe(() => {\r\n        if (noteWebsite) {\r\n            try {\r\n                noteWebsite.close();  // Stelle sicher, dass `close()` aufgerufen werden kann\r\n                console.log(\"noteWebsite closed successfully\");\r\n            } catch (error) {\r\n                console.error(\"Error closing noteWebsite:\", error);\r\n            } finally {\r\n                noteWebsite = undefined;  // Setze die Variable auf undefined, um den Zustand zu aktualisieren\r\n            }\r\n        } else {\r\n            console.log(\"noteWebsite was undefined, so nothing to close.\");\r\n        }\r\n    });\r\n\r\n}).catch(e => console.error(\"Error during WA.onInit:\", e));\r\n\r\nexport {};\r\n"],"names":["noteWebsite","error"],"mappings":"AAEA,QAAQ,IAAI,6BAA6B,EAGzC,IAAIA,EAGJ,GAAG,OAAA,EAAS,KAAK,IAAM,CACnB,QAAQ,IAAI,qBAAqB,EAEjC,GAAG,KAAK,aAAa,aAAa,EAAE,UAAU,SAAY,CAItD,GAHA,QAAQ,IAAI,4BAA4B,EAGpCA,EAAa,CACT,GAAA,CACA,MAAMA,EAAY,QAClB,QAAQ,IAAI,sCAAsC,QAC7CC,EAAO,CACJ,QAAA,MAAM,+CAAgDA,CAAK,CACvE,CACcD,EAAA,MAClB,CAEI,GAAA,CACAA,EAAc,MAAM,GAAG,GAAG,QAAQ,KAAK,CACnC,IAAK,cACL,SAAU,CACN,SAAU,MACV,WAAY,QAChB,EACA,KAAM,CACF,OAAQ,OACR,MAAO,MACX,EACA,OAAQ,CACJ,IAAK,MACT,EACA,SAAU,EAAA,CACb,EACD,QAAQ,IAAI,iCAAiC,QACxCC,EAAO,CACJ,QAAA,MAAM,6BAA8BA,CAAK,CACrD,CAAA,CACH,EAED,GAAG,KAAK,aAAa,aAAa,EAAE,UAAU,IAAM,CAChD,GAAID,EACI,GAAA,CACAA,EAAY,MAAM,EAClB,QAAQ,IAAI,iCAAiC,QACxCC,EAAO,CACJ,QAAA,MAAM,6BAA8BA,CAAK,CAAA,QACnD,CACgBD,EAAA,MAClB,MAEA,QAAQ,IAAI,iDAAiD,CACjE,CACH,CAEL,CAAC,EAAE,MAAM,GAAK,QAAQ,MAAM,0BAA2B,CAAC,CAAC"}